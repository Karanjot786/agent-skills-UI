---
title: "Skill Analysis"
order: 8
icon: "microscope"
description: "Conflict detection, context budgeting, diffing, and benchmarking"
commands: ["doctor --deep", "budget", "diff", "bench"]
---

### `doctor --deep`

Deep conflict analysis across all installed skills.

```bash
skills doctor --deep
```

Extends the existing `doctor` command with a `--deep` flag that runs three conflict detection strategies:

| Strategy | Description |
|----------|-------------|
| Keyword Contradiction | Detects conflicting instructions (e.g., "use tabs" vs "use spaces") |
| Topic Overlap | Jaccard similarity on section headings to find duplicate coverage |
| Rule Extraction | Extracts imperative instructions and compares across skills |

**Output:**
```
ğŸ©º Agent Skills Doctor
  âœ“ Installed skills: 16/16 valid

ğŸ” Deep Conflict Analysis
  âœ“ No conflicting instructions found.
  âœ“ No topic overlaps found.
```

When conflicts exist, you'll see severity levels and estimated wasted tokens.

---

### `budget`

Smart context budget manager â€” loads only the most relevant skills within a token limit.

```bash
skills budget -b <tokens> [options]
```

| Option | Description |
|--------|-------------|
| `-b, --budget <tokens>` | Token budget (required, e.g. 8000) |
| `-f, --format <format>` | Output format: `text`, `xml`, `json` (default: text) |
| `-m, --min-relevance <score>` | Minimum relevance score (0â€“100, default: 10) |
| `-p, --project <dir>` | Project directory to analyze (default: cwd) |
| `--list-only` | Show ranked list without selecting |

**Relevance scoring (no LLM required):**
1. File extension matching (project file types â†’ skill language keywords)
2. Dependency matching (package.json, requirements.txt, Cargo.toml)
3. Keyword density (skill body vs project file/directory names)
4. Description match against all project signals

**Examples:**
```bash
skills budget -b 8000                    # Text output with relevance bars
skills budget -b 4000 --format xml       # Agent-ready XML
skills budget -b 10000 --format json     # Machine-readable
skills budget -b 6000 --min-relevance 30 # Only high-relevance skills
```

**Output:**
```
ğŸ“Š Context Budget Plan
  Budget: 8000 tokens | Skills found: 21

  âœ… Loading 4 skill(s):
    â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–‘â–‘â–‘â–‘â–‘â–‘â–‘ skill-creator (4426 tokens, 67% relevant)
    â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–‘â–‘â–‘â–‘â–‘â–‘â–‘ docx (2538 tokens, 64% relevant)
    â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘ skill-installer (704 tokens, 23% relevant)
    â–ˆâ–ˆâ–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘ test-skill (106 tokens, 10% relevant)

  Summary: Used 7774 / 8000 tokens
```

---

### `diff`

Section-aware comparison between two skills.

```bash
skills diff <skill-a> <skill-b> [options]
```

| Option | Description |
|--------|-------------|
| `--json` | Output as JSON |

Parses each SKILL.md by headings and compares:
- **Added sections** â€” only in skill B
- **Removed sections** â€” only in skill A
- **Changed sections** â€” same heading, different content (with line delta)
- **Token delta** â€” how many tokens differ

**Examples:**
```bash
skills diff frontend-design frontend-code-review
skills diff ./skill-a ./skill-b --json
```

**Output:**
```
ğŸ“Š Skill Diff: frontend-design vs frontend-code-review
  â• Added: 11 sections
  â– Removed: 2 sections
  âœï¸  Changed: 1
  Token delta: -358
```

---

### `bench`

Benchmark and compare skills by quality, size, and coverage.

```bash
skills bench [skills...] [options]
```

| Option | Description |
|--------|-------------|
| `-a, --all` | Benchmark all installed skills |
| `--sort <field>` | Sort by: `quality`, `tokens`, `name` (default: quality) |
| `--json` | Output as JSON |
| `--min-quality <n>` | Filter skills below this quality score (0â€“100) |

**Quality scoring (0â€“100):**
- Frontmatter with name (+10) and description (+10)
- Section headings (+15/+5), code blocks (+15/+5)
- Has examples (+10), has instructions (+10)
- Appropriate token range (+10), no TODOs (+10)

**Examples:**
```bash
skills bench --all                  # All skills, sorted by quality
skills bench --all --sort tokens    # Sorted by size
skills bench --min-quality 80       # Only high-quality skills
```

**Output:**
```
ğŸ“ˆ Skill Benchmark Results
  Skill                     Quality    Tokens   Sections   Code   Features
  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
  add-uint-support          â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ 2311     24         13     ğŸ“ ğŸ’¡ ğŸ“‹
  frontend-code-review      â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ 711      11         2      ğŸ“ ğŸ’¡ ğŸ“‹
  frontend-design           â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–‘â–‘ 1069     2          0      ğŸ“ ğŸ’¡ ğŸ“‹

  Summary: 17 skills | Avg quality: 90% | Total tokens: 41279
  Legend: ğŸ“ frontmatter  ğŸ’¡ examples  ğŸ“‹ instructions
```
